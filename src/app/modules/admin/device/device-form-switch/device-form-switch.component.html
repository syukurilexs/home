<header class="box">
	<h2>Device</h2>

	<button mat-mini-fab color="primary" (click)="back()">
		<mat-icon>arrow_back</mat-icon>
	</button>
</header>
<section>
	<form [formGroup]="deviceForm" (ngSubmit)="onSubmit()">
		<mat-card class="shipping-card">
			<mat-card-header>
				<mat-card-title>{{title}}</mat-card-title>
			</mat-card-header>
			<mat-card-content>
				<div class="box">
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Name</mat-label>
							<input matInput placeholder="Name" formControlName="name">
						</mat-form-field>
					</div>
				</div>

				<div class="box">
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Type</mat-label>
							<mat-select placeholder="Type" formControlName="type">
								<mat-option *ngFor="let state of states" [value]="state.type">
									{{ state.name }}
								</mat-option>
							</mat-select>
							<mat-error *ngIf="deviceForm.controls['type'].hasError('required')">
								State is <strong>required</strong>
							</mat-error>
						</mat-form-field>
					</div>
				</div>

				<div class="box">
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Mqtt Topic</mat-label>
							<input matInput placeholder="Mqtt Topic" formControlName="topic">
						</mat-form-field>
					</div>
				</div>
				
				<div class="box">
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Remark</mat-label>
							<input matInput placeholder="Remark" formControlName="remark">
						</mat-form-field>
					</div>
				</div>

				<div class="box" [ngClass]="{'mobile': isHandset}">
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Key</mat-label>
							<input matInput placeholder="Key" formControlName="key">
						</mat-form-field>
					</div>
					<div class="box-item">
						<mat-form-field class="full-width">
							<mat-label>Value</mat-label>
							<input matInput placeholder="Value" formControlName="value">
						</mat-form-field>
					</div>
					<div class="box-item">
						<button mat-mini-fab (click)="onAdd()" type="button"
							[disabled]="!deviceForm.get('key')?.valid || !deviceForm.get('value')?.valid">
							<mat-icon>add</mat-icon>
						</button>
					</div>
				</div>
				<div class="box">
					<mat-card class="full-width">
						<mat-list role="list">
							<div *ngFor="let item of actions">
								<mat-list-item role="listitem">
									<div class="item">
										<div>
											{{item.key}} - {{item.value}}
										</div>
										<button mat-mini-fab (click)="onDelete(item)" type="button">
											<mat-icon>delete</mat-icon>
										</button>
									</div>
								</mat-list-item>
								<mat-divider></mat-divider>
							</div>
						</mat-list>
					</mat-card>
				</div>

			</mat-card-content>
			<mat-card-actions class="action">
				<button mat-raised-button color="primary" type="submit" [disabled]="deviceForm.invalid">Submit</button>
				<button mat-raised-button color="accent" type="button" (click)="back()">Cancel</button>
			</mat-card-actions>
		</mat-card>
	</form>
</section>